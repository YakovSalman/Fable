const swiper=new Swiper(".swiper",{slidesPerView:1,loop:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0,bulletClass:"swiper_pagination_img",bulletActiveClass:"swiper_pagination_img-active"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}}),sizeLink=document.querySelectorAll(".size__link");function clearActiveClasses(){sizeLink.forEach((e=>{e.classList.remove("active")}))}function dropdown(e,r){e=document.querySelector(e),r=document.querySelector(r),e.addEventListener("click",(e=>{e.preventDefault(),r.classList.toggle("active")})),r&&document.addEventListener("click",(t=>{t.target.closest(".dropdown")||t.target==e||r.classList.remove("active")}))}sizeLink.forEach((e=>{e.addEventListener("click",(r=>{clearActiveClasses(),r.preventDefault(),e.classList.add("active")}))})),dropdown(".nav__link-dropdown",".dropdown"),dropdown(".nav-mob-link-dropdown",".dropdown-mob");const filter=document.querySelectorAll(".filter"),triggerBtn=document.querySelector(".filter__select-current"),selectList=document.querySelector(".filter__select-list"),selectItem=document.querySelectorAll(".filter__select-item"),selectArrow=document.querySelector(".filter__select-arrow");filter.forEach((e=>{triggerBtn.addEventListener("click",(e=>{selectList.classList.toggle("active"),selectArrow.classList.toggle("active"),selectItem.forEach((e=>{e.textContent===triggerBtn.textContent?e.classList.add("inactive"):e.classList.remove("inactive")}))})),selectItem.forEach((e=>{e.addEventListener("click",(r=>{triggerBtn.textContent=e.textContent,selectList.classList.remove("active"),selectArrow.classList.remove("active"),sort()})),document.addEventListener("click",(e=>{e.stopPropagation(),e.target.closest(".filter")||(selectList.classList.remove("active"),selectArrow.classList.remove("active"))}))}))}));const productWrap=document.querySelectorAll(".section__product");function sort(){document.querySelectorAll(".section__product").forEach((e=>{const r=[];Array.from(e.children).forEach((e=>{const t={dataId:e.dataset.id,href:e.getAttribute("href"),img:e.querySelector(".section__img").getAttribute("src"),name:e.querySelector(".section__name").textContent,price:e.querySelector(".section__price").textContent};r.push(t)})),r.forEach((e=>{e.price=e.price.replace(/\D/g,"")})),"Price: Low to High"===triggerBtn.textContent&&r.sort(((e,r)=>e.price-r.price)),"Price: High to Low"===triggerBtn.textContent&&r.sort(((e,r)=>r.price-e.price)),"Featured"===triggerBtn.textContent&&r.sort(((e,r)=>e.dataId-r.dataId)),e.innerHTML="",r.forEach((r=>{e.innerHTML+=`<a class="section__item"data-id="${r.dataId}" href="${r.href}">\n                                    <img class="section__img section__img-product" src="${r.img}" alt="">\n                                    <div class="section__name">${r.name}</div>\n                                    <div class="section__price">€${r.price}</div>\n                                </a> `}))}))}productWrap.forEach((e=>{Array.from(e.children).forEach(((e,r)=>{e.dataset.id=r+1}))}));const tabsContentImg=document.querySelector(".tabs__content-item-img"),body=document.querySelector("body"),tab=document.querySelector(".tabs"),cardFullImg=document.querySelector(".card__full-img");tabsContentImg&&tabsContentImg.addEventListener("click",(e=>{const r=`<div class="card__full-img">\n                                <img src="${tabsContentImg.getAttribute("src")}" alt="">\n                                <i class="fa-solid fa-xmark card__full-img-cross"></i>\n                            </div>\n                            <div class="card__full-img-background"></div>`;tab.insertAdjacentHTML("afterend",r),body.classList.add("locked")})),document.addEventListener("click",(e=>{if(e.target.classList.contains("card__full-img-cross")){const e=document.querySelector(".card__full-img"),r=document.querySelector(".card__full-img-background");e.remove(),r.remove(),body.classList.remove("locked")}}));const ordersRadio=document.querySelectorAll(".form-orders-radio");ordersRadio.forEach((e=>{const r=e.querySelectorAll(".form-orders-input-radio"),t=e.querySelectorAll(".form-orders-label-radio");r.forEach((e=>{t.forEach((r=>{e.addEventListener("change",(()=>{if(r.style.color="#080b13",e.checked){e.closest(".form-orders-item").querySelector("label").style.color="white"}}))}))}))}));const formOrders=document.querySelectorAll(".form-orders");formOrders.forEach((e=>{const r=e.querySelectorAll(".form-orders-input"),t=e.querySelectorAll(".form-orders-checkbox"),o=(e.querySelectorAll(".form-orders-input-radio"),document.querySelectorAll(".form-orders-radio")),c=document.querySelectorAll(".form-orders-radio-colum"),s=e.querySelectorAll(".form-orders-wrap");e.addEventListener("submit",(s=>{function a(e){let r=!1;return e.forEach((e=>{e.querySelectorAll(".form-orders-input-radio").forEach((e=>{e.checked&&(r=!0)}))})),!!r}s.preventDefault(),r.forEach((e=>{""==e.value?e.classList.add("inactive"):e.classList.remove("inactive"),e.classList.contains("form-orders-input-optional")&&e.classList.remove("inactive")})),o.forEach((e=>{const r=e.querySelectorAll("input"),t=e.querySelectorAll("label");!function(){let e=!1;r.forEach((r=>{r.checked&&(e=!0)})),e?r.forEach((e=>{t.forEach((r=>{e.classList.remove("inactive"),r.classList.remove("inactive")}))})):r.forEach((e=>{t.forEach((r=>{e.classList.add("inactive"),r.classList.add("inactive")}))}))}()})),t.forEach((e=>{if(!e.checked){e.closest(".form-orders-group-checkbox").querySelector("label").classList.add("inactive"),e.classList.add("inactive")}})),t.forEach((t=>{t.checked&&function(e){for(let r=0;r<e.length;r++)if(""===e[r].value.trim())return!1;return!0}(r)&&a(o)&&a(c)&&(o.forEach((e=>{e.querySelectorAll("label").forEach((e=>{e.style.color="#080b13"}))})),e.reset(),clearingOrders())}))})),o.forEach((e=>{const r=e.querySelectorAll("input");r.forEach((e=>{e.addEventListener("change",(t=>{e.checked&&r.forEach((e=>{e.classList.remove("inactive")}))}))}))}));const a=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,n=/^[^\d]*$/,l=/[^!@#$%^&*()_]/;r.forEach((e=>{e.addEventListener("change",(r=>{if("city"==e.name)if(n.test(e.value)&&l.test(e.value)){const r=e.closest(".form-orders-group").querySelector(".form-orders-error");e.classList.remove("inactive"),r.classList.remove("active")}else{const r=e.closest(".form-orders-group").querySelector(".form-orders-error");e.classList.add("inactive"),r.classList.add("active")}if("address"==e.name)if(l.test(e.value)){const r=e.closest(".form-orders-group").querySelector(".form-orders-error");e.classList.remove("inactive"),r.classList.remove("active")}else{const r=e.closest(".form-orders-group").querySelector(".form-orders-error");e.classList.add("inactive"),r.classList.add("active")}if(""==e.value){const r=e.closest(".form-orders-group").querySelector(".form-orders-error");e.classList.remove("inactive"),r.classList.remove("active")}}))})),s.forEach((e=>{e.querySelectorAll("input").forEach((e=>{e.addEventListener("change",(()=>{"nameSurname"==e.name&&(n.test(e.value)?(e.classList.remove("inactive"),e.placeholder="Enter name and surname"):(e.placeholder="Enter correct Name and Surname",e.value="",e.classList.add("inactive"))),"email"==e.name&&(a.test(e.value)?(e.classList.remove("inactive"),e.placeholder="Enter email"):(e.placeholder="Enter correct email",e.value="",e.classList.add("inactive"))),"tel"==e.name&&""==!e.value&&(e.placeholder="Enter phone number",e.classList.remove("inactive"))}))}))})),t.forEach((e=>{e.addEventListener("change",(()=>{const r=e.closest(".form-orders-group-checkbox").querySelector("label");e.checked&&(r.classList.remove("inactive"),e.classList.remove("inactive"))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=function(e){let r=e.target,t=r.dataset.phoneClear,o=r.dataset.phonePattern,c=o||"+7(___) ___-__-__",s=0,a=c.replace(/\D/g,""),n=e.target.value.replace(/\D/g,"");"false"!==t&&"blur"===e.type&&n.length<c.match(/([\_\d])/g).length?e.target.value="":(a.length>=n.length&&(n=a),e.target.value=c.replace(/./g,(function(e){return/[_\d]/.test(e)&&s<n.length?n.charAt(s++):s>=n.length?"":e})))},r=document.querySelectorAll("[data-phone-pattern]");for(let t of r)for(let r of["input","blur","focus"])t.addEventListener(r,e)}))}));const tabsHeader=document.querySelectorAll(".tabs");function tabs(e,r,t,o,c="flex"){const s=document.querySelector(e),a=document.querySelectorAll(r),n=document.querySelectorAll(t);function l(){n.forEach((e=>{e.style.display="none"})),a.forEach((e=>{e.classList.remove(o)}))}function i(e=0){n[e].style.display=c,a[e].classList.add(o)}l(),i(),s.addEventListener("click",(e=>{const t=e.target;(t.classList.contains(r.replace(/\./,""))||t.parentNode.classList.contains(r.replace(/\./,"")))&&a.forEach(((e,r)=>{t!=e&&t.parentNode!=e||(l(),i(r))}))}))}tabsHeader.forEach((e=>{e&&tabs(".tabs__header",".tabs__header-item",".tabs__content-item","active")}));const cardsEl=document.querySelectorAll(".card__inner"),navItemOrder=document.querySelector(".nav__item-order span");let numberOrder=0,cards=[];function countingGoods(){if(cards.length>0){let e=cards.length;numberOrder=e,navItemOrder.textContent=`(${e})`,saveToLocalStorageNumberOrders()}0==cards.length&&(numberOrder=0,navItemOrder.textContent="",saveToLocalStorageNumberOrders())}function saveToLocalStorage(){localStorage.setItem("cards",JSON.stringify(cards))}function saveToLocalStorageNumberOrders(){localStorage.setItem("numberOrders",JSON.stringify(numberOrder))}cardsEl.forEach((e=>{const r=e.querySelector(".card__btn"),t=e.querySelector(".card__size"),o=e.querySelector(".card__color"),c=t.querySelectorAll("input"),s=e.querySelector(".swiper"),a=document.querySelector(".card__subtitle");o.querySelectorAll("a").forEach((e=>{e.getAttribute("href").replace(/^\.+/g,"")})),c.forEach((e=>{e.addEventListener("change",(()=>e.value))})),r.addEventListener("click",(e=>{if(function(e){let r=!1;return e.forEach((e=>{e.checked&&(r=!0)})),!!r}(c)){const e=document.querySelector('input[type="radio"]:checked'),r=document.querySelector(".card__size-error");r&&r.remove();let t={collection:a.querySelector("span").textContent,article:11,img:s.querySelector(".swiper-slide-active img").getAttribute("src"),name:document.querySelector(".card__title").textContent,price:document.querySelector(".card__price").textContent,priceNull:document.querySelector(".card__price").textContent,color:document.querySelector(".card__color-link.active").dataset.color,size:e.value,quantity:1};cards.forEach(((e,r)=>{t.size==e.size&&t.name==e.name&&cards.splice(r,1)})),cards.push(t),saveToLocalStorage(),localStorage.getItem("cards")&&(cards=JSON.parse(localStorage.getItem("cards"))),countingGoods()}else{const e='<div class="card__size-error">Choose the size</div>';t.insertAdjacentHTML("beforeend",e)}}))})),localStorage.getItem("numberOrders")&&(numberOrder=JSON.parse(localStorage.getItem("numberOrders"))),navItemOrder.textContent=`(${numberOrder})`,localStorage.getItem("cards")&&(cards=JSON.parse(localStorage.getItem("cards")));const orders=document.querySelectorAll(".orders");orders.forEach((e=>{localStorage.getItem("cards")&&(cards=JSON.parse(localStorage.getItem("cards"))),cards.forEach((e=>{const r=document.querySelector(".orders-cards-inner"),t=`<div class="orders-cards">\n                                <img class="orders-cards-img" src="${e.img}" alt="">\n                                <div class="orders-cards-info">\n                                    <div class="orders-cards-name">${e.name}</div>\n                                    <div class="orders-cards-item orders-cards-item-collection">\n                                        Collection:<span>${e.collection}</span>\n                                    </div>\n                                    <div class="orders-cards-item orders-cards-item-article">\n                                        Article:<span>${e.article}</span>\n                                    </div>\n                                    <div class="orders-cards-wrap orders-cards-wrap-feature">\n                                        <div class="orders-cards-feature orders-cards-feature-size">\n                                            Size:<span>${e.size}</span>\n                                        </div>\n                                        <div class="orders-cards-feature  orders-cards-feature-color">\n                                            Color:<span>${e.color}</span>\n                                        </div>\n                                        <div class="orders-cards-feature orders-cards-feature-quantity">\n\n                                            <div class="orders-cards-subtitle">Quantity:</div>\n                                            <div class="orders-cards-counter">\n                                                <button class="orders-minus">-</button> <span>${e.quantity}</span> <button class="orders-plus">+</button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="orders-cards-wrap orders-cards-wrap-price">\n                                        <div class="orders-cards-price">\n                                            Price:<span>${e.price}</span>\n                                        </div>\n                                        <button class="orders-cards-price-btn">Delete</button>\n                                    </div>\n                                </div>\n                            </div>`;r.insertAdjacentHTML("afterbegin",t)})),countPrice()}));const quantityProducts=document.querySelectorAll(".orders-cards-counter");quantityProducts.forEach((e=>{const r=e.querySelector(".orders-minus"),t=e.querySelector(".orders-plus"),o=e.querySelector("span");let c=parseInt(o.textContent);const s=e.closest(".orders-cards").querySelector(".orders-cards-price span"),a=(parseInt(s.textContent.replace(/\D/g,"")),o.closest(".orders-cards")),n=a.querySelector(".orders-cards-name"),l=a.querySelector(".orders-cards-feature-size span"),i=a.querySelector(".orders-cards-feature-color span");e.addEventListener("click",(e=>{if(e.target==t){let e=++c;o.textContent=e}if(e.target==r&&1!=c){let e=--c;o.textContent=e}cards.forEach((e=>{if(n.textContent==e.name&&l.textContent==e.size&&i.textContent==e.color){let r=parseInt(e.priceNull.replace(/\D/g,""))*c;s.textContent=`€${r}`,e.quantity=o.textContent,e.price=`€${r}`,saveToLocalStorage()}})),countPrice(),countTotalPrice()}))}));const removeProduct=document.querySelectorAll(".orders-cards-price-btn");function countPrice(){let e=0;const r=document.querySelectorAll(".orders-cards-price span"),t=document.querySelector(".orders-full-amount-wrap");r.forEach((r=>{if(e+=parseInt(r.textContent.replace(/\D/g,"")),t){t.querySelector(".orders-full-amount-item-summary .orders-full-price").textContent=`€${e}`}}))}function countTotalPrice(){if(document.querySelector(".orders-full-amount")){let e=0;const r="€",t=document.querySelector(".orders-full-amount-item-summary .orders-full-price"),o=document.querySelector(".orders-full-amount-item-delivery .orders-full-price"),c=document.querySelector(".orders-full-amount-item-promo .orders-full-price"),s=document.querySelector(".orders-full-amount-total .orders-full-price");if(0!=cards.length?o.textContent="€30":o.textContent="€0",0!=parseInt(c.textContent.replace(/\D/g,""))){e=parseInt(t.textContent.replace(/\D/g,""))-parseInt(c.textContent.replace(/\D/g,""))+parseInt(o.textContent.replace(/\D/g,""))}else e=parseInt(t.textContent.replace(/\D/g,""))+parseInt(o.textContent.replace(/\D/g,""));0==cards.length&&(e=0),s.textContent=`${r}${e}`}}removeProduct.forEach((e=>{e.addEventListener("click",(r=>{const t=e.closest(".orders-cards"),o=t.querySelector(".orders-cards-name").textContent,c=t.querySelector(".orders-cards-feature-size span").textContent,s=t.querySelector(".orders-cards-feature-color span").textContent,a=document.querySelector(".orders-full-amount-item-summary .orders-full-price");cards.forEach(((e,r)=>{o==e.name&&c==e.size&&s==e.color&&(cards.splice(r,1),saveToLocalStorage())})),t.remove(),countPrice(),countingGoods(),countTotalPrice(),0==cards.length&&(a.textContent="€0")}))})),countTotalPrice();const promocode=document.querySelectorAll(".orders-full-amount-promocode");function clearingOrders(){localStorage.clear();const e=document.querySelector(".orders__inner"),r=document.querySelectorAll(".orders-cards"),t=document.querySelector(".header").getBoundingClientRect().top,o=document.querySelector(".orders-full-amount-item-summary .orders-full-price"),c=document.querySelector(".orders-full-amount-total .orders-full-price"),s=document.querySelector(".orders-full-amount-item-delivery .orders-full-price"),a=document.querySelector(".orders-full-amount-item-promo .orders-full-price"),n=document.querySelector(".nav__item-order span");window.scrollBy({top:t,behavior:"smooth"}),r.forEach((e=>{e.remove()})),o.textContent="€0",c.textContent="€0",s.textContent="€0",a.textContent="€0",n.textContent="",e.insertAdjacentHTML("afterbegin",'<div class="orders-message">Your order has been received, you will be contacted soon</div>')}promocode.forEach((e=>{const r=e.querySelector(".orders-full-amount-promocode-input"),t=document.querySelector(".orders-full-amount-item-promo .orders-full-price"),o="1f5kv7",c="fby6kg",s="2bgk6h";e.addEventListener("submit",(e=>{e.preventDefault(),r.value==o&&(t.textContent="€50"),r.value==c&&(t.textContent="€100"),r.value==s&&(t.textContent="€150"),r.value==o||r.value==c||r.value==s?r.style.border="1px solid #00ce37":(r.style.border="1px solid #080B13",t.textContent="€0"),countTotalPrice()}))}));